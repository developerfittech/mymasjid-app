<ion-view>
  <ion-nav-title>{{ ctrl.masjid ? ctrl.masjid.name : 'Masjid Not Set' }}</ion-nav-title>
  <ion-content class='daily-timings'>
    <div class='loading' ng-if='ctrl.isLoading'>
      Loading... <ion-spinner></ion-spinner>
    </div>
    <div class='error' ng-if='ctrl.errorMsg'>
      {{ ctrl.errorMsg }}
    </div>
    <ion-refresher
      ng-if="ctrl.masjid"
      pulling-text="Pull to refresh..."
      on-refresh="ctrl.loadTimings(ctrl.masjid)">
    </ion-refresher>
    <div class="card" ng-hide="ctrl.errorMsg">
      <div class="item item-divider">
        Daily Timings
      </div>
      <div class="item item-text-wrap" ng-if="ctrl.dayTimings">

        <div class='timing-date'>
          From {{ ctrl.getDate(ctrl.dayTimings) | date:'EEEE, MMMM dd, y' }}
        </div>
        <table class='iqamah-times-table'>
          <tr>
            <th></th>
            <th>Adhan</th>
            <th>Iqamah</th>
          </tr>
          <tr class='iqamah-row {{salahKey}}' ng-repeat="salahKey in ctrl.salahKeys">
            <td class='salah-name'>
              <span class="next-iqamah-indicator" ng-if="ctrl.nextIqamah(ctrl.dayTimings) == salahKey">
                <i class="ion-ionic"></i>
              </span>
              {{ ctrl.salahNames[salahKey] }}
            </td>
            <td class='adhan-time'>
              {{ ctrl.dayTimings[salahKey + "_adhan"] || "---" }}
            </td>
            <td class='iqamah-time'>
              {{ ctrl.dayTimings[salahKey] || "---" }}
            </td>
          </tr>
        </table>
      </div>
      <div ng-if="ctrl.monthlyInfo"
        class="item monthly-info"
        ng-bind-html="ctrl.monthlyInfo"></div>
    </div>

  </ion-content>
</ion-view>
